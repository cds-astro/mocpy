<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title># Space &amp; Time coverages &#8212; MOCPy 0.17.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/mocpy.css?v=b2680190" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />
    
    <script src="../../_static/documentation_options.js?v=0c3dd48d"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <link rel="icon" href="../../_static/MOCpy-icon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="First steps with Frequency MOCs" href="First_Steps_with_FMOCs.html" />
    <link rel="prev" title="Space and time MOC" href="STMOC%20from%20time%20ranges.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"><span id="logotext1">MOC</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="First_Steps_with_FMOCs.html" title="First steps with Frequency MOCs">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="STMOC%20from%20time%20ranges.html" title="Space and time MOC">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../../index.html">MOCPy 0.17.0 documentation</a>
	 &#187;
      </li>
      <li><a href="../../examples/user_documentation.html" accesskey="U">User documentation</a> &#187;</li>
      
      <li># Space &amp; Time coverages</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="#-Space-&amp;-Time-coverages">
<h1># Space &amp; Time coverages<a class="headerlink" href="##-Space-&-Time-coverages" title="Link to this heading">¶</a></h1>
<p>This notebook shows:</p>
<ol class="arabic">
<li><p>How to <strong>create</strong> Space-Time coverages of the 2MASS image catalog and the XMM_DR8 catalog</p></li>
<li><p>How to <strong>perform logical operations</strong> (e.g. intersection) of two Space-Time coverages</p></li>
<li><p>How to <strong>filter</strong> a catalog by a Space-Time coverage</p></li>
<li><p>How to <strong>save</strong> a Space-Time coverage in a FITS file</p></li>
<li><p class="rubric" id="how-to-vizualize-space-time-coverages-within-a-specific-time-frame">How to <strong>vizualize</strong> Space-Time coverages within a specific time frame</p>
<p class="rubric" id="space-time-coverages-creation-of-2mass-and-xmm-dr8">1. Space-Time coverages creation of <em>2MASS</em> and <em>XMM_DR8</em></p>
</li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">ICRS</span><span class="p">,</span> <span class="n">Angle</span><span class="p">,</span> <span class="n">SkyCoord</span>
<span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">astropy.time</span> <span class="kn">import</span> <span class="n">Time</span><span class="p">,</span> <span class="n">TimeDelta</span>
<span class="kn">from</span> <span class="nn">astroquery.vizier</span> <span class="kn">import</span> <span class="n">Vizier</span>
<span class="kn">from</span> <span class="nn">mocpy</span> <span class="kn">import</span> <span class="n">STMOC</span><span class="p">,</span> <span class="n">WCS</span><span class="p">,</span> <span class="n">TimeMOC</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
<p>Creation of the Space-Time coverage of 2MASS at the depth (time, space) = 23, 7 i.e.: - a <strong>time</strong> resolution of ~3 days - a <strong>spatial</strong> resolution of ~27 arcsecs</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loading the data</span>
<span class="n">two_mass_data</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>
    <span class="s2">&quot;./../resources/STMOC/2MASS-list-images.fits.gz&quot;</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;fits&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Definition of the times, longitudes and latitudes</span>
<span class="n">times_2mass</span> <span class="o">=</span> <span class="n">Time</span><span class="p">(</span><span class="n">two_mass_data</span><span class="p">[</span><span class="s2">&quot;mjd&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;mjd&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">)</span>
<span class="n">lon_2mass</span> <span class="o">=</span> <span class="n">two_mass_data</span><span class="p">[</span><span class="s2">&quot;ra&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span>
<span class="n">lat_2mass</span> <span class="o">=</span> <span class="n">two_mass_data</span><span class="p">[</span><span class="s2">&quot;dec&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows in 2MASS: &quot;</span><span class="p">,</span> <span class="n">lon_2mass</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Number of rows in 2MASS:  4879128
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Creation of the STMOC ~ wait around 1 minute</span>
<span class="n">time_depth</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">spatial_depth</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">two_mass</span> <span class="o">=</span> <span class="n">STMOC</span><span class="o">.</span><span class="n">from_times_positions</span><span class="p">(</span>
    <span class="n">times_2mass</span><span class="p">,</span>
    <span class="n">time_depth</span><span class="p">,</span>
    <span class="n">lon_2mass</span><span class="p">,</span>
    <span class="n">lat_2mass</span><span class="p">,</span>
    <span class="n">spatial_depth</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 11.4 s, sys: 17.8 s, total: 29.2 s
Wall time: 18.5 s
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time of the first observation: &quot;</span><span class="p">,</span> <span class="n">two_mass</span><span class="o">.</span><span class="n">min_time</span><span class="o">.</span><span class="n">iso</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time of the last observation: &quot;</span><span class="p">,</span> <span class="n">two_mass</span><span class="o">.</span><span class="n">max_time</span><span class="o">.</span><span class="n">iso</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Time of the first observation:  1997-06-03 20:25:27.103
Time of the last observation:  2001-02-18 03:38:35.462
</pre></div></div>
</div>
<hr class="docutils" />
<section id="Query-a-ST-MOC-by-a-time-range">
<h2>Query a ST-MOC by a time range<a class="headerlink" href="#Query-a-ST-MOC-by-a-time-range" title="Link to this heading">¶</a></h2>
<p>Let’s query the ST-MOC of <strong>2MASS</strong> to retrieve the regions being observed each year.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_to_plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">wcs</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">moc</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a MOC to a plot.&quot;&quot;&quot;</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">wcs</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;lon&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;lat&quot;</span><span class="p">)</span>

    <span class="n">moc</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">wcs</span><span class="o">=</span><span class="n">wcs</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#00bb00&quot;</span><span class="p">)</span>
    <span class="c1"># moc.border(ax=ax, wcs=wcs, linewidth=1, color=&quot;green&quot;)</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">time_ranges</span> <span class="o">=</span> <span class="n">Time</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[[</span><span class="s2">&quot;1997-06-03&quot;</span><span class="p">,</span> <span class="s2">&quot;1998-01-01&quot;</span><span class="p">]],</span>
        <span class="p">[[</span><span class="s2">&quot;1998-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;1999-01-01&quot;</span><span class="p">]],</span>
        <span class="p">[[</span><span class="s2">&quot;1999-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">]],</span>
        <span class="p">[[</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2001-02-18&quot;</span><span class="p">]],</span>
    <span class="p">],</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;iso&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">,</span>
    <span class="n">out_subfmt</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">with</span> <span class="n">WCS</span><span class="p">(</span>
    <span class="n">fig</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="mi">330</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span>
    <span class="n">center</span><span class="o">=</span><span class="n">SkyCoord</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">),</span>
    <span class="n">coordsys</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">,</span>
    <span class="n">rotation</span><span class="o">=</span><span class="n">Angle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">degree</span><span class="p">),</span>
    <span class="n">projection</span><span class="o">=</span><span class="s2">&quot;AIT&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">wcs</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">tmoc</span> <span class="o">=</span> <span class="n">TimeMOC</span><span class="o">.</span><span class="n">from_time_ranges</span><span class="p">(</span>
            <span class="n">min_times</span><span class="o">=</span><span class="n">time_ranges</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="n">max_times</span><span class="o">=</span><span class="n">time_ranges</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="n">delta_t</span><span class="o">=</span><span class="n">TimeDelta</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;sec&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">moc_2mass</span> <span class="o">=</span> <span class="n">two_mass</span><span class="o">.</span><span class="n">query_by_time</span><span class="p">(</span><span class="n">tmoc</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;2MASS observations between </span><span class="se">\n</span><span class="si">{</span><span class="n">time_ranges</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iso</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">time_ranges</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iso</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">id_subplot</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;22&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">add_to_plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">id_subplot</span><span class="p">,</span> <span class="n">wcs</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">moc_2mass</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_collections_notebooks_Space_%26_Time_coverages_8_0.png" src="../../_images/_collections_notebooks_Space_%26_Time_coverages_8_0.png" />
</div>
</div>
<p>Creation of the Space-Time coverage of XMM_DR8 at the depth (time, space) = 10, 7</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loading &amp; preparing the data</span>
<span class="n">xmm_dr8_data</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;../resources/STMOC/vizier_votable.b64&quot;</span><span class="p">)</span>
<span class="n">times_xmm</span> <span class="o">=</span> <span class="n">Time</span><span class="p">(</span><span class="n">xmm_dr8_data</span><span class="p">[</span><span class="s2">&quot;MJD0&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;mjd&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">)</span>
<span class="n">lon_xmm</span> <span class="o">=</span> <span class="n">xmm_dr8_data</span><span class="p">[</span><span class="s2">&quot;RA_ICRS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span>
<span class="n">lat_xmm</span> <span class="o">=</span> <span class="n">xmm_dr8_data</span><span class="p">[</span><span class="s2">&quot;DE_ICRS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows in XMM_DR8: &quot;</span><span class="p">,</span> <span class="n">lon_xmm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Number of rows in XMM_DR8:  531454
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Create the STMOC</span>
<span class="n">xmm_dr8_stmoc</span> <span class="o">=</span> <span class="n">STMOC</span><span class="o">.</span><span class="n">from_times_positions</span><span class="p">(</span>
    <span class="n">times_xmm</span><span class="p">,</span>
    <span class="n">time_depth</span><span class="p">,</span>
    <span class="n">lon_xmm</span><span class="p">,</span>
    <span class="n">lat_xmm</span><span class="p">,</span>
    <span class="n">spatial_depth</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 1.42 s, sys: 353 ms, total: 1.77 s
Wall time: 728 ms
</pre></div></div>
</div>
<hr class="docutils" />
<section id="2.-Intersection-between-the-2MASS-and-XMM_DR8-Space-Time-coverages">
<h3>2. Intersection between the <em>2MASS</em> and <em>XMM_DR8</em> Space-Time coverages<a class="headerlink" href="#2.-Intersection-between-the-2MASS-and-XMM_DR8-Space-Time-coverages" title="Link to this heading">¶</a></h3>
<p>ST-MOCs are very convinient when it comes to perform logical operations between them (as it is already possible with spatial footprints).</p>
<p>As an example, it is possible to <strong>retrieve the areas that have been observed at the same time by the 2MASS and XMM survey</strong>! It benefits from the good performance of MOC (thanks to its core functions written in Rust).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Compute their intersection and check that it is not empty</span>
<span class="n">xmm_inter_2mass</span> <span class="o">=</span> <span class="n">xmm_dr8_stmoc</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">two_mass</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is the MOC intersection empty?:&quot;</span><span class="p">,</span> <span class="n">xmm_inter_2mass</span><span class="o">.</span><span class="n">is_empty</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time of the first observation:&quot;</span><span class="p">,</span> <span class="n">xmm_inter_2mass</span><span class="o">.</span><span class="n">min_time</span><span class="o">.</span><span class="n">iso</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time of the last observation:&quot;</span><span class="p">,</span> <span class="n">xmm_inter_2mass</span><span class="o">.</span><span class="n">max_time</span><span class="o">.</span><span class="n">iso</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Time of the first observation: 2000-02-18 06:49:16.163
Time of the last observation: 2000-11-05 03:55:44.532
CPU times: user 6.84 ms, sys: 221 µs, total: 7.07 ms
Wall time: 7.01 ms
</pre></div></div>
</div>
</section>
<hr class="docutils" />
<section id="3.-Filter-catalogs-by-a-Space-Time-coverage">
<h3>3. Filter catalogs by a Space-Time coverage<a class="headerlink" href="#3.-Filter-catalogs-by-a-Space-Time-coverage" title="Link to this heading">¶</a></h3>
<p>ST-MOCs can be used to retrieve the sources in <em>2MASS</em> and <em>XMM_DR8</em> that have been observed at the same time i.e. <strong>within a ~3 days time resolution</strong> and a <strong>27 arcsec spatial resolution</strong>.</p>
<p>Let’s retrieve the XMM sources being observed at the <strong>same time</strong> by 2MASS.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Filtering a 4.8M rows table is quite fast</span>
<span class="n">mask_xmm</span> <span class="o">=</span> <span class="n">xmm_inter_2mass</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">times_xmm</span><span class="p">,</span> <span class="n">lon_xmm</span><span class="p">,</span> <span class="n">lat_xmm</span><span class="p">)</span>
<span class="n">sources_xmm</span> <span class="o">=</span> <span class="n">xmm_dr8_data</span><span class="p">[</span><span class="n">mask_xmm</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sources_xmm</span><span class="p">)</span><span class="si">}</span><span class="s2"> sources in XMM</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">sources_xmm</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

 10 sources in XMM

CPU times: user 240 ms, sys: 37.3 ms, total: 278 ms
Wall time: 278 ms
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><i>Table length=10</i>
<table id="table140498205124048" class="table-striped table-bordered table-condensed">
<thead><tr><th>RA_ICRS</th><th>DE_ICRS</th><th>MJD0</th><th>recno</th></tr></thead>
<thead><tr><th>deg</th><th>deg</th><th>d</th><th></th></tr></thead>
<thead><tr><th>float64</th><th>float64</th><th>float64</th><th>int32</th></tr></thead>
<tr><td>89.637991</td><td>-50.397917</td><td>51604.6465</td><td>147242</td></tr>
<tr><td>89.665918</td><td>-50.524772</td><td>51604.6465</td><td>147293</td></tr>
<tr><td>89.787931</td><td>-50.275894</td><td>51604.6465</td><td>147436</td></tr>
<tr><td>89.818302</td><td>-50.509235</td><td>51604.6465</td><td>147462</td></tr>
<tr><td>89.910377</td><td>-50.361675</td><td>51604.6465</td><td>147530</td></tr>
<tr><td>89.920087</td><td>-50.386144</td><td>51604.6465</td><td>147542</td></tr>
<tr><td>89.936948</td><td>-50.444740</td><td>51604.6465</td><td>147560</td></tr>
<tr><td>89.945907</td><td>-50.465488</td><td>51604.6465</td><td>147577</td></tr>
<tr><td>89.978749</td><td>-50.510436</td><td>51604.6465</td><td>147634</td></tr>
<tr><td>89.986374</td><td>-50.533013</td><td>51604.6465</td><td>147640</td></tr>
</table></div></div>
</div>
<p>One can then use <strong>astroquery.vizier</strong> to get more informations about the filtered sources.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xmm_skycoords</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span>
    <span class="n">sources_xmm</span><span class="p">[</span><span class="s2">&quot;RA_ICRS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
    <span class="n">sources_xmm</span><span class="p">[</span><span class="s2">&quot;DE_ICRS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
    <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span><span class="p">,</span>
    <span class="n">frame</span><span class="o">=</span><span class="n">ICRS</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># Query the IX/55/xmm3r8s catalog with the three first positions + 0.1 arcsec</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Vizier</span><span class="o">.</span><span class="n">query_region</span><span class="p">(</span>
    <span class="n">xmm_skycoords</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span>
    <span class="n">radius</span><span class="o">=</span><span class="n">Angle</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;arcsec&quot;</span><span class="p">),</span>
    <span class="n">catalog</span><span class="o">=</span><span class="s2">&quot;IX/55/xmm3r8s&quot;</span><span class="p">,</span>
<span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">result</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="4.-Save-into-a-FITS-file">
<h3>4. Save into a FITS file<a class="headerlink" href="#4.-Save-into-a-FITS-file" title="Link to this heading">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xmm_inter_2mass</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;xmm_inter_2mass_stmoc.fits&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;fits&quot;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="5.-Vizualize-a-Space-Time-coverage-interactively">
<h3>5. Vizualize a Space-Time coverage interactively<a class="headerlink" href="#5.-Vizualize-a-Space-Time-coverage-interactively" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>An interactive slider allows to select a time range. Whenever the slider moves, the ST-MOC is queried by the new time range. Each <strong>time query gives back the spatial footprint during that time</strong> (i.e. a mocpy.MOC object).</p></li>
<li><p>You can change the field of view to zoom in (resp. zoom out) if you want. By reducing the FoV you will be able to vizualize the sources in XMM filtered by the intersection Space-Time coverage.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define an interactive plot for time MOCs.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">t</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">time_slider</span>
    <span class="k">global</span> <span class="n">last_t1</span><span class="p">,</span> <span class="n">last_t2</span>
    <span class="k">global</span> <span class="n">moc</span>
    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">new_values</span> <span class="o">=</span> <span class="n">time_slider</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">change</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>

    <span class="n">new_t1</span><span class="p">,</span> <span class="n">new_t2</span> <span class="o">=</span> <span class="n">new_values</span>

    <span class="n">tmoc_constraint</span> <span class="o">=</span> <span class="n">TimeMOC</span><span class="o">.</span><span class="n">from_time_ranges</span><span class="p">(</span>
        <span class="n">min_times</span><span class="o">=</span><span class="n">Time</span><span class="p">([</span><span class="n">new_t1</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;mjd&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">),</span>
        <span class="n">max_times</span><span class="o">=</span><span class="n">Time</span><span class="p">([</span><span class="n">new_t2</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;mjd&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">),</span>
        <span class="n">delta_t</span><span class="o">=</span><span class="n">TimeDelta</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;tdb&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;sec&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="c1"># Query the Space-Time coverages with the same time frame</span>
    <span class="c1"># This operation returns a spatial coverage and is pretty fast thanks to</span>
    <span class="c1"># the data-structure used for storing Space-Time coverages.</span>
    <span class="n">moc_2mass</span> <span class="o">=</span> <span class="n">two_mass</span><span class="o">.</span><span class="n">query_by_time</span><span class="p">(</span><span class="n">tmoc_constraint</span><span class="p">)</span>
    <span class="n">moc_xmm_dr8</span> <span class="o">=</span> <span class="n">xmm_dr8_stmoc</span><span class="o">.</span><span class="n">query_by_time</span><span class="p">(</span><span class="n">tmoc_constraint</span><span class="p">)</span>
    <span class="n">moc_xmm_dr8_inter_2mass</span> <span class="o">=</span> <span class="n">xmm_inter_2mass</span><span class="o">.</span><span class="n">query_by_time</span><span class="p">(</span><span class="n">tmoc_constraint</span><span class="p">)</span>

    <span class="c1"># Plot the spatial coverages</span>
    <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

        <span class="k">with</span> <span class="n">WCS</span><span class="p">(</span>
            <span class="n">fig</span><span class="p">,</span>
            <span class="n">fov</span><span class="o">=</span><span class="mi">50</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span>
            <span class="n">center</span><span class="o">=</span><span class="n">SkyCoord</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">),</span>
            <span class="n">coordsys</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="n">Angle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">degree</span><span class="p">),</span>
            <span class="n">projection</span><span class="o">=</span><span class="s2">&quot;AIT&quot;</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">wcs</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">wcs</span><span class="p">)</span>
            <span class="c1"># Call fill with a matplotlib axe and the `~astropy.wcs.WCS` wcs object.</span>
            <span class="n">moc_2mass</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">wcs</span><span class="o">=</span><span class="n">wcs</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;2mass&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">moc_xmm_dr8</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">wcs</span><span class="o">=</span><span class="n">wcs</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;xmm_dr8&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">moc_xmm_dr8_inter_2mass</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">wcs</span><span class="o">=</span><span class="n">wcs</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;xmm_dr8 inter 2mass&quot;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Plot the sources contained into `xmm_inter_2mass`</span>
            <span class="n">skycoords</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span>
                <span class="n">sources_xmm</span><span class="p">[</span><span class="s2">&quot;RA_ICRS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">sources_xmm</span><span class="p">[</span><span class="s2">&quot;DE_ICRS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span><span class="p">,</span>
                <span class="n">frame</span><span class="o">=</span><span class="n">ICRS</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="o">.</span><span class="n">to_pixel</span><span class="p">(</span><span class="n">skycoords</span><span class="p">,</span> <span class="n">wcs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
                <span class="n">X</span><span class="p">,</span>
                <span class="n">Y</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;sources from XMM filtered through </span><span class="se">\n</span><span class="s2">xmm_dr8 inter 2mass&quot;</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower left&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;GLON&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;GLAT&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span>
            <span class="s2">&quot;Coverage of 2MASS images, XMM_DR8 and their intersection between MJD </span><span class="si">%d</span><span class="s2"> and </span><span class="si">%d</span><span class="s2">&quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">new_values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">new_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">min_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">two_mass_data</span><span class="p">[</span><span class="s2">&quot;mjd&quot;</span><span class="p">]))</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">max_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">two_mass_data</span><span class="p">[</span><span class="s2">&quot;mjd&quot;</span><span class="p">]))</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">time_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntRangeSlider</span><span class="p">(</span>
    <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mi">51594</span><span class="p">,</span> <span class="mi">51917</span><span class="p">],</span>
    <span class="nb">min</span><span class="o">=</span><span class="n">min_time</span><span class="p">,</span>
    <span class="nb">max</span><span class="o">=</span><span class="n">max_time</span><span class="p">,</span>
    <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;MJD interval:&quot;</span><span class="p">,</span>
    <span class="n">disabled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="s2">&quot;90%&quot;</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># In blue is a region that has been observed by 2MASS and XMM_DR8 at the same time</span>
<span class="n">time_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="n">update</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">time_slider</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#"># Space &amp; Time coverages</a><ul>
<li><a class="reference internal" href="#Query-a-ST-MOC-by-a-time-range">Query a ST-MOC by a time range</a><ul>
<li><a class="reference internal" href="#2.-Intersection-between-the-2MASS-and-XMM_DR8-Space-Time-coverages">2. Intersection between the <em>2MASS</em> and <em>XMM_DR8</em> Space-Time coverages</a></li>
<li><a class="reference internal" href="#3.-Filter-catalogs-by-a-Space-Time-coverage">3. Filter catalogs by a Space-Time coverage</a></li>
<li><a class="reference internal" href="#4.-Save-into-a-FITS-file">4. Save into a FITS file</a></li>
<li><a class="reference internal" href="#5.-Vizualize-a-Space-Time-coverage-interactively">5. Vizualize a Space-Time coverage interactively</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../../_sources/_collections/notebooks/Space &amp; Time coverages.ipynb.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, Matthieu Baumann &lt;matthieu.baumann@astro.unistra.fr&gt; Thomas Boch &lt;thomas.boch@astro.unistra.fr&gt; Manon Marchand &lt;manon.marchand@astro.unistra.fr&gt; F.-X. Pineau &lt;francois-xavier.pineau@astro.unistra.fr&gt;.<br/>
    Last built 17 Oct 2024. <br/>
  </p>
</footer>
  </body>
</html>